---
title: Getting started/Nextjs
type: tutorial
route: /tutorial/getting-started/nextjs
order: 1
---

## Install

```sh
yarn add @component-controls/nextjs-plugin
```

## Configure

the default options will configure `component-controls` to work with react apps,  with `react-docgen` for prop-types and `react-docgen-typescript` for typescript props information


```js:title=next.config.js
const withStories = require('@component-controls/nextjs-plugin/build');

module.exports = withStories({ configPath: '.config', ....other options });
```
## Configure emotion ssr

[`_app.js and _document.js`](https://github.com/vercel/next.js/tree/canary/examples/with-emotion/pages)

## Create routes

### Create home page

```jsx:title=pages/index.tsx
import React, { FC } from 'react';
import { GetStaticProps } from 'next';
import { DocType, defDocType } from '@component-controls/core';
import { DocPage } from '@component-controls/app';
import { Layout, store, getIndexPage } from '@component-controls/nextjs-plugin';

interface PageListProps {
  type: DocType;
  docId?: string;
}

const HomePage: FC<PageListProps> = ({ type = defDocType, docId }) => {
  return (
    <Layout docId={docId}>
      <DocPage type={type} />
    </Layout>
  );
};

export const getStaticProps: GetStaticProps = async () => {
  const homePage = getIndexPage(store);
  const { docId = null, type = null } = homePage;
  return { props: { docId, type } };
};

export default HomePage;
```

### Create document type pages

```jsx:title=pages/[doctype].tsx
import React, { FC } from 'react';
import { GetStaticProps, GetStaticPaths } from 'next';
import { DocType, defDocType } from '@component-controls/core';
import { DocumentHomePage } from '@component-controls/app';
import {
  Layout,
  store,
  getHomePagesPaths,
  getDocHomePage,
} from '@component-controls/nextjs-plugin';

interface PageListProps {
  type: DocType;
  docId?: string;
  storyId?: string;
}

const DocHomeTemplate: FC<PageListProps> = ({
  type = defDocType,
  docId,
  storyId,
}) => {
  return (
    <Layout docId={docId} storyId={storyId}>
      <DocumentHomePage type={type} />
    </Layout>
  );
};

export const getStaticPaths: GetStaticPaths = async () => {
  return { paths: getHomePagesPaths(store), fallback: false };
};

export const getStaticProps: GetStaticProps = async ({ params }) => {
  const { doctype: basepath } = params as { doctype: string };
  const page = getDocHomePage(store, basepath);
  const { type = null, docId = null, storyId = null } = page || {};
  return { props: { docId, storyId, type } };
};

export default DocHomeTemplate;
```

### Create document and story pages

```jsx:title=pages/[doctype]/[...docid].tsx
import React, { FC } from 'react';
import { GetStaticProps, GetStaticPaths } from 'next';
import { DocPage } from '@component-controls/app';
import { DocType } from '@component-controls/core';
import {
  Layout,
  store,
  getDocPagesPaths,
  getDocPage,
} from '@component-controls/nextjs-plugin';

interface DocPageProps {
  docId?: string;
  storyId?: string;
  type: DocType;
  activeTab?: string;
  category?: string;
}

const DocPageTemplate: FC<DocPageProps> = ({
  docId,
  storyId,
  type,
  category,
}) => {
  return (
    <Layout docId={docId} storyId={storyId}>
      <DocPage type={type} category={category} />
    </Layout>
  );
};

export const getStaticPaths: GetStaticPaths = async () => {
  return { paths: getDocPagesPaths(store), fallback: false };
};

export const getStaticProps: GetStaticProps = async ({ params }) => {
  const { doctype, docid } = params as { doctype: string; docid: string[] };
  const page = getDocPage(store, doctype, docid);
  const {
    type = null,
    docId = null,
    storyId = null,
    category = null,
    activeTab = null,
  } = page || {};
  return { props: { docId, type, storyId, category, activeTab } };
};

export default DocPageTemplate;
```